<% content_for :css_personalizado do %>
   <style type="text/css">
     .dropdown-content {
      
      max-height: 200px; 
      
    }

      .checkbox-list input[type="checkbox"] + label {
      width: 50% !important;
      vertical-align: top;
     height: inherit;
    }
  </style>
<% end %>


<div class="row titulo-seccion">
  <div class="banner banner-perfil">
    <div class="contenedor">
      <div class="col s6">
        <h5 class="text-uppercase">
         Crear Nuevo Plan
        </h5>
      </div>
      <div class="col s6 text-right ">
        <ol class="breadcrumb">
          <li>
            <a href="/">Inicio</a>
          </li>
          <li class="active">Crear Plan</li>
        </ol>
      </div>
    </div>
  </div>
</div>

<div  id="form_wizard_1" class=" row pad30-h">

  <%= form_for @plan, :url => plans_crear_plan_path, html:{id: "add_plan", class: "form-horizontal"} do |f| %>
    <div class="form-wizard">
      <div class="form-body steps ">
        
        
        <div class="tab-content">
          <div class="feedback alert alert-danger display-none">
            <button class="close" data-dismiss="alert"></button>
            Algunos campos tienen errores. Por favor revisa abajo.
          </div>
          <div class="feedback alert-success display-none">
            <button class="close" data-dismiss="alert"></button>
            La validación fue exitosa.
          </div>
          <div >
            <div class="row">
              <div class="col s10 offset-s1 left panel z-depth-3 ">
                <h5 >Datos del Plan </h5>
                
                <div class="input-field col s8">
                  <label for="plan_nombre">Nombre <span class="required">
                  * </span>
                  </label>
                  <%= f.text_field :nombre, :required=>true, autocomplete: "off" %>
                </div>
                <div class="col s4">
                  <div class="input-field  input-group ">
                    <label for="plan_costo">Costo <span class="required">
                    *  </span>
                    </label>

                    <%= f.number_field :costo,:min=> 1, :required=>true, autocomplete: "off" %>
                    <span class="input-group-addon no-padding">
                      $ </span>
                  </div>
                </div>
              
                <div class="input-field col s12">
                  <label for="plan_descripcion">Descripcion <span class="required">
                  * </span>
                  </label>
                  <%= f.text_area :descripcion, :required=>true, autocomplete: "off", class: "materialize-textarea", length: "120" %>

                </div>

                <div class="col s12">
                  <label>Frecuencia de pago <span class="required">*</span></label>
                  <%= f.collection_select(:frecuencia_pago_id, FrecuenciaPago.all, :id, :nombre) %>
                </div>

                <div class="col s12 ">
                  <h6>Servicios</h6>
                  <% @servicios = Servicio.all %>

                  <% @servicios.each do |servicio| -%>
                    <div class="row" style="
                    padding: 10px 10px;
                    margin: 0;
                    border-bottom: 1px solid #e0e0e0;">
                      <div class="valign-wrapper">

                        <div class="col s4">
                          <input type="checkbox" id="plan_servicio_<%= servicio.id%>" name="plan[servicio][<%= servicio.id%>][servicio]" onchange="seleccion_servicio('#<%= servicio.id%>div')"  />
                          <label for="plan_servicio_<%= servicio.id%>" ><%= servicio.nombre%></label>
                        </div>

                        <div id="<%= servicio.id%>div" class="col s8 input-field hidden">   

                          <input  id="plan_servicio_descripcion_<%= servicio.id%>" name="plan[servicio][<%= servicio.id%>][descripcion]" type="text" class="validate">
                          <label for="plan_servicio__descripcion_<%= servicio.id%>" >Descripcón</label>
                        </div>

                      </div>
                  </div>
                 <% end -%>
                 
                </div>
          
              
              </div>
            </div>
          </div>

        </div>
      </div>
      <div class="form-actions">
        <div class="row">
          <div class="offset-s4 col s8">
            
            <input type="submit" class="btn btn-success " value="Guardar">
            <button type="button" onclick="window.location.href='/planes'" class="btn btn-danger waves-effect">Cancelar</button>
          </div>
        </div>
      </div>
    </div>
  <% end %>
</div>



<% content_for :javascript_personalizado do %>
  <script type="text/javascript">
    $(document).ready(function(){
        $('.alert-danger').hide();
        $(' .alert-success').hide();
    });
     function seleccion_servicio(id){
    $(id).toggleClass('hidden');
  };
  </script>
<% end %>

